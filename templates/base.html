<!DOCTYPE html>
<html>
  <head>
    <title>Automated Laundromat</title>
    <!-- Include Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- Include custom CSS -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="../../../static/style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .flashes {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
      }
    </style>

    {% block head %} {% endblock %}
  </head>
  <body>
    <nav class="navbar">
      <img
        src="{{ url_for('static', filename='images/logo.png') }}"
        alt="logo"
        class="logo-img"
      />
      <ul class="links">
        <a href="{{ url_for('home') }}"><li class="link">Home</li></a>
        {% if not session.get('user_id') %}
        <a href="{{ url_for('login') }}"><li class="link">Login</li></a>
        <a href="{{ url_for('signup') }}"><li class="link">Signup</li></a>
        {% else %}
        <a href="{{ url_for('machines_html') }}"
          ><li class="link">Book Machine</li></a
        >
        <a href="{{ url_for('logout') }}"><li class="link">Logout</li></a>
        <a href="{{ url_for('bookings_history_html') }}"
          ><li class="link">Bookings</li></a
        >
        {% endif %}
      </ul>
    </nav>

    {% with messages = get_flashed_messages() %}
    <div class="flashes">
      {% if messages %} {% for message in messages %}
      <div
        class="alert alert-primary alert-dismissible fade show"
        role="alert"
        style="background-color: #485975; color: #ffffff"
      >
        {{ message }}
        <button
          type="button"
          class="close"
          data-dismiss="alert"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {% endfor %} {% endif %}
    </div>
    {% endwith %} {% block content %} {% endblock %}

    <footer class="footer">
      <p class="footer-p">Made with <i class="fas fa-heart"></i> by Group 3</p>
    </footer>

    <!-- Include Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>

    <script>
      function alert(message) {
        const alertDiv = document.createElement('div')
        alertDiv.classList.add(
          'alert',
          'alert-primary',
          'alert-dismissible',
          'fade',
          'show'
        )
        alertDiv.style.backgroundColor = '#485975'
        alertDiv.style.color = '#ffffff'
        alertDiv.innerHTML = `
          ${message}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        `
        document.querySelector('.flashes').appendChild(alertDiv)
      }
      // clean up alerts after 4 seconds
      window.setInterval(function () {
        const alerts = document.querySelectorAll('.alert')
        alerts.forEach((alert) => {
          alert.style.transition = 'opacity 0.8s'
          alert.style.opacity = '0'
          setTimeout(() => {
            alert.remove()
          }, 800)
        })
      }, 4000)
    </script>
  </body>
</html>
